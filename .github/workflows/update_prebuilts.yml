name: Update Prebuilts
on:
  workflow_dispatch:
  push: #remove this before merging, we cannot trigger workflow dispatch outside the main branch
jobs:
  update-prebuilts:
    runs-on: ubuntu-latest
    steps:
      - name: "Checkout androidx repo"
        uses: actions/checkout@v2
      - name: "Set environment variables"
        shell: bash
        run: development/update_playground.sh
      - name: "see if anything changed"
        shell: bash
        id: "check-for-changes"
        run: |
          set -x
          git status
          HAS_CHANGES=`git status --porcelain|wc -l`
          echo "::set-output name=has_changes::$HAS_CHANGES"
      - name: "we have changes"
        shell: bash
        if: ${{ steps.check-for-changes.outputs.has_changes == 1 }}
        run: echo "have changes ${{ steps.check-for-changes.outputs.has_changes }}"
      - name: "we don't have changes"
        shell: bash
        if: ${{ steps.check-for-changes.outputs.has_changes == 0 }}
        run: echo "no changes ${{ steps.check-for-changes.outputs.has_changes }}"
          
